# AWS運用コスト分析 - 安島日報アプリ

## 前提条件
- **想定料金**: 月額 35,000円/社
- **想定利用規模**: 中小企業（社員数10-50人規模）
- **アーキテクチャ**: Next.js (App Router) + Turso/RDS + S3

---

## AWS インフラ構成案

### パターンA: フルマネージド構成（推奨）

```
┌─────────────────────────────────────────────────┐
│ Route 53 (DNS)                                   │
└─────────────────────┬───────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────┐
│ CloudFront (CDN)                                 │
└─────────────────────┬───────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────┐
│ Application Load Balancer                        │
└─────────────────────┬───────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────┐
│ ECS Fargate (Next.js アプリ) x2-4コンテナ        │
└─────────────────────┬───────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────┐
│ RDS PostgreSQL (db.t3.micro or Aurora Serverless)│
└──────────────────────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────┐
│ S3 (添付ファイル・画像保存)                        │
└──────────────────────────────────────────────────┘
```

---

## 月額コスト詳細（1社あたり）

### 1. コンピューティング (ECS Fargate)
- **構成**: 0.25 vCPU, 0.5 GB RAM x 2タスク（本番環境）
- **稼働時間**: 24時間 x 30日 = 720時間/月
- **料金**:
  - vCPU: $0.04048/時間 x 0.25 vCPU x 2タスク x 720時間 = $14.57
  - メモリ: $0.004445/GB/時間 x 0.5 GB x 2タスク x 720時間 = $3.20
  - **小計**: 約 $17.77/月 ≈ **2,700円**

### 2. データベース (RDS PostgreSQL)
#### オプションA: RDS db.t3.micro
- **構成**: db.t3.micro (1 vCPU, 1 GB RAM)
- **料金**:
  - インスタンス: $0.017/時間 x 720時間 = $12.24
  - ストレージ: 20 GB gp3 SSD = $2.60
  - バックアップ: 20 GB = $2.00
  - **小計**: 約 $16.84/月 ≈ **2,550円**

#### オプションB: Aurora Serverless v2（推奨）
- **構成**: 最小 0.5 ACU、最大 1 ACU
- **平均使用**: 0.5 ACU x 720時間
- **料金**:
  - ACU: $0.12/ACU/時間 x 0.5 x 720 = $43.20
  - ストレージ: 10 GB = $1.00
  - I/O: 100万リクエスト = $2.00
  - **小計**: 約 $46.20/月 ≈ **7,000円**

**→ 小規模はRDS db.t3.micro、スケール時はAurora推奨**

### 3. ストレージ (S3)
- **用途**: 添付ファイル、画像、バックアップ
- **想定容量**: 5 GB/月（新規）、累積 50 GB
- **料金**:
  - ストレージ: $0.023/GB x 50 GB = $1.15
  - PUT/POST: 10,000リクエスト = $0.05
  - GET: 100,000リクエスト = $0.04
  - **小計**: 約 $1.24/月 ≈ **190円**

### 4. ネットワーク (ALB + CloudFront)
#### Application Load Balancer
- **料金**:
  - ALB時間: $0.0225/時間 x 720時間 = $16.20
  - LCU: 平均 0.5 LCU x 720時間 x $0.008 = $2.88
  - **小計**: 約 $19.08/月 ≈ **2,900円**

#### CloudFront
- **データ転送**: 10 GB/月（想定）
- **料金**:
  - データ転送: $0.114/GB x 10 GB = $1.14
  - リクエスト: 1,000,000リクエスト x $0.0075/10,000 = $0.75
  - **小計**: 約 $1.89/月 ≈ **290円**

### 5. Route 53 (DNS)
- **ホストゾーン**: 1つ = $0.50/月
- **クエリ**: 100万クエリ = $0.40
- **小計**: 約 $0.90/月 ≈ **140円**

### 6. その他サービス
- **CloudWatch Logs**: $0.50/GB x 5 GB = $2.50 ≈ **380円**
- **CloudWatch Alarms**: 10個 x $0.10 = $1.00 ≈ **150円**
- **Secrets Manager**: 2シークレット x $0.40 = $0.80 ≈ **120円**
- **Systems Manager (無料枠内)**: $0
- **小計**: 約 **650円**

---

## 総コスト（1社あたり/月）

### パターンA: RDS db.t3.micro構成
| 項目 | 月額（USD） | 月額（円） |
|-----|-----------|-----------|
| ECS Fargate | $17.77 | 2,700円 |
| RDS PostgreSQL | $16.84 | 2,550円 |
| S3 | $1.24 | 190円 |
| ALB | $19.08 | 2,900円 |
| CloudFront | $1.89 | 290円 |
| Route 53 | $0.90 | 140円 |
| その他 | $4.30 | 650円 |
| **合計** | **$62.02** | **≈ 9,420円** |

### パターンB: Aurora Serverless v2構成
| 項目 | 月額（USD） | 月額（円） |
|-----|-----------|-----------|
| ECS Fargate | $17.77 | 2,700円 |
| Aurora Serverless v2 | $46.20 | 7,000円 |
| S3 | $1.24 | 190円 |
| ALB | $19.08 | 2,900円 |
| CloudFront | $1.89 | 290円 |
| Route 53 | $0.90 | 140円 |
| その他 | $4.30 | 650円 |
| **合計** | **$91.38** | **≈ 13,870円** |

**※為替レート: 1 USD = 152円で計算**

---

## マルチテナント構成（複数社対応）

### 共有リソース化によるコスト削減

複数の企業に同じインフラを共有させることで、**劇的にコストを削減**できます。

#### 固定費（何社契約しても同じ）
- ECS Fargate: 2,700円
- ALB: 2,900円
- CloudFront: 290円
- Route 53: 140円
- その他監視: 650円
- **固定費合計**: 約 **6,680円/月**

#### 変動費（契約社数に応じて増加）
- RDS (db.t3.micro): 2,550円/月
- S3 ストレージ: 190円/社/月
- **変動費**: 約 **2,740円/社/月**

---

## 収益シミュレーション

### 前提
- **販売価格**: 35,000円/社/月
- **想定契約数**: 1社〜20社でシミュレーション

| 契約社数 | 月次売上 | 固定費 | 変動費 | インフラコスト合計 | 粗利益 | 粗利率 |
|---------|---------|-------|-------|-----------------|-------|-------|
| 1社 | 35,000円 | 6,680円 | 2,740円 | 9,420円 | **25,580円** | **73%** |
| 3社 | 105,000円 | 6,680円 | 8,220円 | 14,900円 | **90,100円** | **86%** |
| 5社 | 175,000円 | 6,680円 | 13,700円 | 20,380円 | **154,620円** | **88%** |
| 10社 | 350,000円 | 6,680円 | 27,400円 | 34,080円 | **315,920円** | **90%** |
| 20社 | 700,000円 | 6,680円 | 54,800円 | 61,480円 | **638,520円** | **91%** |
| 50社 | 1,750,000円 | 6,680円 | 137,000円 | 143,680円 | **1,606,320円** | **92%** |

### スケールアップ時のインフラ調整
- **10社以上**: ECS Fargate を 3-4タスクに増強（+2,700円）
- **20社以上**: RDS を db.t3.small に変更（+2,500円）
- **50社以上**: Aurora Serverless v2 に移行（+5,000円）

---

## 追加コスト要素

### 開発・運用コスト（月額換算）
- **サーバー監視・保守**: 20,000円/月
- **機能追加・バグ修正**: 50,000円/月（想定）
- **カスタマーサポート**: 30,000円/月
- **バックアップ・セキュリティ対応**: 10,000円/月
- **合計**: 約 **110,000円/月**

### 総合的な損益分岐点
| 項目 | 金額 |
|-----|-----|
| インフラ固定費 | 6,680円 |
| 開発・運用コスト | 110,000円 |
| **月次固定費合計** | **116,680円** |

**損益分岐点**: 116,680円 ÷ (35,000円 - 2,740円) = **約4社**

→ **最低4社の契約で損益分岐点を超えます**

---

## コスト最適化施策

### 1. 現状のTurso継続利用
- **Turso Pro**: $29/月（≈4,400円）
- RDSより安価で、マルチテナント対応可能
- **推奨**: 当面はTursoを継続し、50社超えたらRDS検討

### 2. Vercel継続利用（Next.js最適化）
- **Vercel Pro**: $20/月（≈3,000円）
- AWSへの移行コスト・学習コストを削減
- 自動スケーリング、CDN、プレビュー環境込み

### 3. ハイブリッド構成（推奨）
```
- フロントエンド: Vercel (3,000円/月)
- データベース: Turso Pro (4,400円/月)
- ストレージ: AWS S3 (190円/月/社)
- 合計固定費: 約 7,400円/月
```

---

## 結論

### ✅ **35,000円/月の価格設定は十分に利益が出ます**

#### パターン1: AWS完全移行
- **1社目から粗利率73%**（月25,580円の利益）
- **5社で粗利率88%**（月154,620円の利益）
- **損益分岐点: 4社**

#### パターン2: Vercel + Turso継続（推奨）
- **インフラコスト**: 約7,400円 + 190円/社
- **1社目から粗利率79%**（月27,410円の利益）
- **5社で粗利率89%**（月166,650円の利益）
- **損益分岐点: 4社**

### 📊 収益性評価
| 契約社数 | 月次粗利益（AWS） | 月次粗利益（Vercel+Turso） |
|---------|-----------------|-------------------------|
| 1社 | 25,580円 | 27,410円 |
| 3社 | 90,100円 | 94,810円 |
| 5社 | 154,620円 | 166,650円 |
| 10社 | 315,920円 | 342,100円 |

### 🎯 推奨戦略
1. **フェーズ1（0-10社）**: Vercel + Turso で運用
   - 低コスト、高粗利
   - 開発スピード維持

2. **フェーズ2（10-50社）**: Vercel + AWS RDS に移行検討
   - データベースの安定性向上
   - コンプライアンス対応

3. **フェーズ3（50社以上）**: フルAWS移行
   - エンタープライズ対応
   - カスタマイズ性向上

---

## 競合比較

### 他社SaaS日報システム価格
- kintone: 月額 780円/人（10人で7,800円）
- サイボウズ Office: 月額 500円/人（10人で5,000円）
- 独自開発SaaS: 月額 10,000〜50,000円/社

**→ 35,000円は市場価格として妥当、中規模企業向けには競争力あり**

---

**最終更新日**: 2026年2月7日
